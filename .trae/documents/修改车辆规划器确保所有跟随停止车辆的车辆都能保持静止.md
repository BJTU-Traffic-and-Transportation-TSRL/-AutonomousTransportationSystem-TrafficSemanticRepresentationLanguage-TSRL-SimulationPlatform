## 问题分析

通过分析代码，我发现当前的停车逻辑存在以下问题：

1. **自车规划器（TSRL_ego_vehicle_planner.py）**：
   - 当车辆行为是KL且速度低于10/3.6时，会检测前方是否有停止车辆
   - 但检测逻辑不够全面，可能无法覆盖所有情况

2. **多车规划器（TSRL_multi_vehicle_planner.py）**：
   - 没有前方停止车辆的检测逻辑
   - 当车辆行为是KL且等待绿灯时会停止，但对于前方停止车辆的情况处理不足

## 修复方案

1. **增强自车规划器的前方停止车辆检测**：
   - 修改KL行为处理逻辑，确保所有速度下都能检测前方停止车辆
   - 增强检测条件，确保能正确识别前方停止的车辆

2. **为多车规划器添加前方停止车辆检测**：
   - 在KL行为处理逻辑中添加前方停止车辆检测
   - 确保所有因为前车停止而应该停止的车辆都能生成停止轨迹

3. **确保所有停止轨迹都是完全静止的**：
   - 确保所有调用`stop_trajectory_generator`的地方都能生成完全静止的轨迹
   - 验证停止轨迹的生成逻辑

## 修复步骤

1. **修改TSRL_ego_vehicle_planner.py**：
   - 增强KL行为处理逻辑中的前方停止车辆检测
   - 确保所有速度下都能检测前方停止车辆
   - 修改检测条件，提高检测准确性

2. **修改TSRL_multi_vehicle_planner.py**：
   - 在KL行为处理逻辑中添加前方停止车辆检测
   - 确保多车规划时也能正确处理跟随停止车辆的情况
   - 添加与自车规划器类似的检测逻辑

3. **验证修复效果**：
   - 确保所有因为前车停止而处于长期停止状态的车辆都能保持原地静止
   - 验证主动停止车辆后跟随的所有车辆都能保持静止

## 修复内容

1. **TSRL_ego_vehicle_planner.py**：
   - 修改KL行为处理逻辑
   - 增强前方停止车辆检测
   - 确保所有速度下都能检测前方停止车辆

2. **TSRL_multi_vehicle_planner.py**：
   - 添加前方停止车辆检测逻辑
   - 在KL行为处理中添加类似自车规划器的检测逻辑
   - 确保多车规划时也能正确处理跟随停止车辆的情况

## 影响范围

- 修复仅涉及两个规划器文件
- 不影响其他功能模块
- 适用于所有场景
- 向后兼容，不会破坏现有功能

通过本次修复，确保所有因为前车停止而处于长期停止状态的车辆都能保持原地静止，包括主动停止车辆后跟随的车型1以及车型1后跟随的车型N。